#!/bin/sh
# .github/hooks/post-merge
# Decrypts all secrets after a successful pull/merge

echo "üîì [Hook] Post-merge: Decrypting secrets with SOPS..."

# Run Taskfile decryption
task decrypt

if [ $? -ne 0 ]; then
  echo "‚ö†Ô∏è Warning: Failed to decrypt some secrets."
  # Do not exit with error as merge is already done
fi

echo "‚úÖ Secrets decrypted for editing."
