---
apiVersion: hydra.ory.sh/v1alpha1
kind: OAuth2Client
metadata:
  name: envoy-gateway
  namespace: ory-system
spec:
  hydraAdmin:
    url: http://hydra-admin
    port: 4445
    endpoint: /clients
  secretName: envoy-gateway-client-secret
  grantTypes:
    - authorization_code
    - refresh_token
  responseTypes:
    - code
  scope: openid profile email offline_access
  # Single centralized redirect URI - no per-app configuration needed!
  # Adding new protected apps requires zero changes here
  redirectUris:
    - https://oidc.${cluster_domain}/oauth2/callback
  postLogoutRedirectUris:
    - https://oidc.${cluster_domain}/
  tokenEndpointAuthMethod: client_secret_basic
