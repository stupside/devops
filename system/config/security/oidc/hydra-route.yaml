---
# Hydra public API (OIDC endpoints)
apiVersion: gateway.networking.k8s.io/v1
kind: HTTPRoute
metadata:
  name: hydra
  namespace: ory-system
spec:
  parentRefs:
    - name: unified
      namespace: envoy-gateway-system
      sectionName: public  # Public access (OIDC provider must be public)
  hostnames:
    - "hydra.${cluster_domain}"
  rules:
    - matches:
        - path:
            type: PathPrefix
            value: /
      backendRefs:
        - name: hydra-public
          port: 4444
